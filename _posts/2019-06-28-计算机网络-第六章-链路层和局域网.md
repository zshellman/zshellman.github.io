# 计算机网络 第6章 链路层和局域网

链路层的主体部分是在网络适配器里实现的。



链路层主要提供的服务：

- 成帧
- 链路接入
- 可靠交付
- 差错检测和纠正

链路层差错检验的方法：

- 奇偶校验
- 检验和 方法
- 循环冗余检测（广泛应用）



多路访问协议三种类型：

- 信道划分协议

  FDM：直接对信道进行频率划分

  TDM：对信道进行时间上的划分，划分成很小的一个个时隙，每个时隙对应专门的使用者

  码分多址：CDMA，对每个节点分配一种不同的编码，然后每个节点用它唯一的编码来对它发送的数据进行编码。

- 随机接入协议

  时隙ALOHA：就是把TDM做成并发的，在同一个时隙内多个主机都可以进行发送数据，如果发生碰撞了则随机一个时延再进行发送。

  载波侦听多路访问协议

- 轮流协议

  轮询协议：有一个中心节点，主节点首先向节点1发送一个报文，告诉它能够传输的帧的最多数量。节点1传输完了后主节点告诉节点2能够传输的帧的最多数量。以此循环。

  令牌传递协议：没有主节点，一个称为令牌的小的特殊帧再节点之间以某种固定的次序进行交换。持有令牌的节点则可以发送帧数据，否则就把令牌传递给下一个节点。



## 交换局域网

ARP协议就是把ip地址转成mac地址，只在同一个子网中进行解析。



**一个web请求的过程（下面是一个比喻，方便理解）**

小潘初来乍到，首先要干嘛呢？肯定是要办个身份证，但是找谁办呢？不是随便一个人都能办的，小潘于是就大喊一声：”我要办身份证！“，这时候马上就有个叫DHCP的人回应你：”小伙子，我这里可以办“，然后小潘就在他这里领取了身份证。这就是DHCP协议，你向广播一个申请IP地址的服务包，DHCP服务器就会分配一个IP地址你才能正常上网。办好身份证同时会给你一堆资料，资料里面有重要的一条写着想联系某某时候要去问个叫**小域**（DNS）的人。

小潘想要送个东西给叫小明的人，这时候他只知道对方叫小明，不知道地址。这时候怎么办呢？看看办身份证时候给你的资料嘛，里面说了你可以问那个小域的人，小域这人吧，也不一定知道，但是他有渠道打听到地址，他向他的顶层上级一个叫老根（根路由器）的人询问，你知道小明这个人住在哪吗？老根也不知道，他的笔记本上只记者小明是在老威管的那一块区域，于是他把负责那一片区的老威（权威服务器）联系方式告诉了小域，小域又去问老威，老威这一下就查到了小明的地址，然后把地址告诉了小域，小域又告诉了你小明的联系地址（IP地址）。这就是DNS域名解析。

小潘知道地址后需要确认一下，于是就打个电话过去确认一下

> “嗨，你是小明吗？”  
> “是的”  
> “好的，我知道了，待会我送你个东西”  

这就是TCP三次握手，通信后呢，确定了地址和人，那么小潘就发送东西了。

货物经过千山万水，终于来到了小明的地址处，保安发现小明这个人居然还没在他这登记住哪？那这东西也没法送到具体地址，没办法，于是保安站小区内一身大喊：”谁是小明啊，你有快递！“，小明听到后就马上回应：”这呢“，于是保安就给小明送了过去。这里就是ARP协议。

小明收到东西后就会告诉小潘收到东西了，不然小潘就会重新发送一个过了，这就是TCP的重传机制。

好了，以上就是一个简单的网络访问过程，中间当然省略了很多的东西，但是大概是这么个意思。



