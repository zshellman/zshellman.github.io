# 第四章 Schema与数据类型优化

数据类型的选择和优化

- 更小的通常更好：尽量使用可以正确存储数据的最小数据类型
- 简单就好：简单数据类型的操作通常需要更少的CPU周期，比如整型性能高于字符
- 尽量避免null





![](..\img\mysql_1.png)





数据库的范式

- 第一范式(1NF)，字段的原子性，字段必须不可再次分解
- 第二范式(2NF)，消除部分依赖，第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关(主要针对联合主键而言)
- 第三范式(3NF)，消除传递依赖：非主键字段不能相互依赖



反范式

故名思义，跟范式所要求的正好相反，在反范式的设计模式，我们可以允许适当的数据的冗余，用这个冗余去取操作数据时间的缩短。**也就是用空间来换取时间,把数据冗余在多个表中，当查询时可以减少或者是避免表之间的关联。**

反范式的利弊：

优点：

1. 查询时可以减少表的关联；
2. 可以更好的进行索引优化；

缺点：

1. 存在数据冗余以及数据维护异常；
2. 对数据的修改需要更多的成本；





schema设计中的陷阱

- 太多的列
- 太多的关联
- 全能的枚举
- 变相的枚举