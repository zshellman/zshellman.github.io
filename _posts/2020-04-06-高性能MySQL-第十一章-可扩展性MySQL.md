---
layout: page
title: 高性能MySQL 第十一章 可扩展性MySQL
mermaid: false
---

# 第十一章 可扩展性MySQL

当数据量大了，就必须得考虑分库分表，加机器，这就是简单的MySQL的扩展。这一章我们可以了解到更多的MySQL的扩展方式。

主要扩展方式内有以下几种：

- 向上扩展：购买更多的机器。但最后当增加服务器对性能提升没什么效用时候就得考虑向外扩展。

- 向外扩展：读写分离，采用备库，数据分布到多个机器上。
- 通过多实例扩展：在一台服务器上部署多个服务器实例，监听不同端口。
- 通过集群扩展：通过一个数据库集群来存储数据，应用层不需要知道数据存在哪里。
- 向内扩展：对不再需要的数据进行归档和清理。这个对应用的影响比较大。



**负载均衡**

负载均衡的常见目的：

- 可扩展性：对于扩展性有帮助，比如读写分离
- 高效性：合理利用资源，控制请求分发到各住
- 可用性：保证服务器的可用，当一台有故障时候可以马上切换到另一台
- 透明性：对于客户端来说只有一个虚拟的服务器
- 一致性：当应有有状态时候，负载均衡器要把相关的查询指向同一台服务器，以防止状态丢失



负载均衡的方法：

- 直接连接：
  - 基于复制上的读写分离
  - 代码中修改应用的配置
  - 修改DNS，这个方法会延迟
- 引入中间件（负载均衡器）
  - 随机
  - 轮询
  - 最少连接数
  - 最快响应
  - 哈希
  - 权重
- 一主多备的负载均衡
  - 功能分区
  - 过滤和数据分区
  - 将部分写操作转移到备库
  - 保证备库跟上主库
  - 同步写操作



扩展不是看起来那么简单的，最好是根据应用的需求来实际扩展，另外真要做扩展那就多看看已有的轮子，避免造新的轮子去踩坑。

