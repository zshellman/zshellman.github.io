---
layout: page
title: 深入理解计算机 第二章 信息的表示和处理
mermaid: true
---



# 第二章 信息的表示和处理

这一章主要是讲的计算机内部信息的表示和处理。

## 信息的存储

计算机内部都是采用二进制进行数据的存储的，也就是说你的数据最终都会变成0101这种数据存储在计算机里面。

大多数计算机使用8位的块（字节），作为最小可寻址的内存单位，而不是访问内存中单独的位。

以0x或者0X开头的数字常量被认为是16进制，字符“A”~“F”既可以是大写也可以是小写。

字长决定的最重要的系统参数就是虚拟地址空间的最大大小。对于一个字长为ω位的机器而言，虚拟地址的范围就是0 ~ 2^ω - 1，程序最多访问2^ω个字节。
32位字长限制虚拟地址空间为4GB，64位字长可以使得虚拟地址空间为16EB。

最低有效字节在最前面的方式，称为小端法。就是把数据存储时候颠倒了。
最高有效字节在最前面的方式，称为大端法。

Android和iOS都是运行于小端模式。
大多数intel的兼容机都是小端法。



## 整数的表示和运算

整型数据类型表示有限范围的整数。

负数在计算机中是用补码的表示的，至于为什么会这样表示可以看这一篇大佬的博客：[关于2的补码](http://www.ruanyifeng.com/blog/2009/08/twos_complement.html)

强制类型转换的结果保持位值不变，只是改变了解释这些位的方式。

无符号加法：溢出直接去除高位。

有符号加法：当做无符号数进行加法，溢出直接截断。

有符号的非：-x=~x+1，即等于按位取反再加1.

有符号数的乘法：x*y=(x的补码*y的补码)的补码

整数乘以常数：用移位和加法以及减小来代替乘法，无论x是无符号的还是有符号的，其计算结果一致。

整数除以常数：思路与乘法一致。有符号整数移位在小于0时会出现问题，当x<0时，x>>k的结果是x/(2^k)的向下取整，例如-12340>>4结果为-772，然而-12340/16应该是-771，这时C语言对其进行修改：

```
(x<0?x+(1<<k)-1:x)>>k
```

在x<0的情况下，加上（1<<k）-1的偏置量。



## 浮点数

浮点数表示，由于位置的有效性，所以电脑一般并不能准确的表示浮点数，只是近确表示



IEEE浮点标准：

> V = (-1)^s * M * 2^E
>
> - s：sign，符号，决定正负。
>
> - M：significand，尾数，通常是[1.0~2.0)范围的小数
>
> - E：exponent，阶码，就是次方数。

单精度浮点格式中，s，exp和frac字段分别为1位、k = 8位和n = 23位，得到一个32位的表示。双精度浮点格式中，s、exp和frac字段分别为1位、k = 11位和n = 52位，得到一个64位的表示。



浮点数的舍入规则是向偶数舍入（round-to-even），或者向最接近的值舍入(round-to-nearest)。

